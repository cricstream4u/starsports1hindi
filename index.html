<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Star Sports 1 Hindi</title>

  <!-- Video.js -->
  <link href="https://vjs.zencdn.net/8.5.2/video-js.css" rel="stylesheet"/>
  <script src="https://vjs.zencdn.net/8.5.2/video.min.js"></script>

  <!-- Dash.js for Video.js -->
  <script src="https://cdn.dashjs.org/latest/dash.all.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/videojs-contrib-dash@2.11.0/dist/videojs-dash.min.js"></script>

  <!-- Plyr CSS + JS -->
  <link rel="stylesheet" href="https://cdn.plyr.io/3.7.8/plyr.css"/>
  <script src="https://cdn.plyr.io/3.7.8/plyr.polyfilled.js"></script>

  <style>
    body { margin:0; background:#000; }
    video { width:100%; height:100%; }
  </style>
</head>
<body>

<video id="player" class="video-js vjs-default-skin" controls playsinline></video>

<script>
  const url = "https://jiotvmblive.cdn.jio.com/bpk-tv/Star_Sports_HD1_Hindi_BTS/output/index.mpd?__hdnea=st=1758779788~exp=1758866188~acl=/*~hmac=b70c75a01b8ed02415fd49a505e8da526c7f8183e9b1a028c1b09621c2bbad0b";

  const player = videojs('player', {
    autoplay: false,
    controls: true,
    preload: 'auto',
    fluid: true,
    html5: {
      dash: {
        drm: {
          "org.w3.clearkey": {
            clearkeys: {
              "400131994b445d8c8817202248760fda": "2d56cb6f07a75b9aff165d534ae2bfc4"
            }
          }
        }
      }
    }
  });

  player.src({
    src: url,
    type: 'application/dash+xml'
  });

  // Wrap with Plyr UI
  const plyr = new Plyr(player.tech().el_, {
    controls: [
      'play-large', 'play', 'progress', 'current-time',
      'mute', 'volume', 'captions', 'settings',
      'fullscreen'
    ],
    settings: ['quality', 'speed', 'loop'],
    quality: { default: 720, options: [360, 480, 720, 1080], forced: true }
  });

  // Auto-detect qualities from DASH
  player.ready(() => {
    const tech = player.tech({ IWillNotUseThisInPlugins: true });
    const dash = tech?.vjs_dash?.player;

    if (dash) {
      const levels = dash.getBitrateInfoListFor("video");
      const qualities = levels.map(l => l.height).sort((a,b)=>a-b);

      plyr.options.quality = { default: qualities[0], options: qualities };
      plyr.updateSetting('quality', { options: qualities });
    }
  });
</script>

</body>
</html>
